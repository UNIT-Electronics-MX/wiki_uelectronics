"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1197],{4849:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"Code/npk","title":"Biblioteca RS485 para Sensores de Suelo","description":"Esta biblioteca para MicroPython permite la comunicaci\xf3n con el sensor de suelo RS485 para leer:","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/Code/npk.md","sourceDirName":"Code","slug":"/Code/npk","permalink":"/wiki_uelectronics/es/docs/Code/npk","draft":false,"unlisted":false,"editUrl":"https://github.com/UNIT-Electronics/docs/Code/npk.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Gu\xeda para pantalla TFT ST7789V con MicroPython","permalink":"/wiki_uelectronics/es/docs/Code/tft_st7789v"},"next":{"title":"UNIT - Development boards","permalink":"/wiki_uelectronics/es/docs/category/unit---development-boards"}}');var a=r(4848),i=r(8453);const o={sidebar_position:2},l="Biblioteca RS485 para Sensores de Suelo",c={},t=[{value:"Caracter\xedsticas",id:"caracter\xedsticas",level:2},{value:"Para Empezar",id:"para-empezar",level:2},{value:"Instalaci\xf3n",id:"instalaci\xf3n",level:3},{value:"Ejemplo",id:"ejemplo",level:3},{value:"Uso de ampy para transferir archivos al ESP32",id:"uso-de-ampy-para-transferir-archivos-al-esp32",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"biblioteca-rs485-para-sensores-de-suelo",children:"Biblioteca RS485 para Sensores de Suelo"})}),"\n",(0,a.jsx)(n.p,{children:"Esta biblioteca para MicroPython permite la comunicaci\xf3n con el sensor de suelo RS485 para leer:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\ud83c\udf31 Humedad del suelo (%)"}),"\n",(0,a.jsx)(n.li,{children:"\ud83c\udf21\ufe0f Temperatura (\xb0C)"}),"\n",(0,a.jsx)(n.li,{children:"\u26a1 Conductividad el\xe9ctrica (CE, \xb5S/cm)"}),"\n",(0,a.jsx)(n.li,{children:"\ud83e\uddea Nivel de pH"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"caracter\xedsticas",children:"Caracter\xedsticas"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Integraci\xf3n sencilla con UART en MicroPython"}),"\n",(0,a.jsx)(n.li,{children:"Validaci\xf3n CRC y manejo de respuesta del sensor"}),"\n",(0,a.jsx)(n.li,{children:"Totalmente de c\xf3digo abierto (GPLv3)"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"para-empezar",children:"Para Empezar"}),"\n",(0,a.jsx)(n.h3,{id:"instalaci\xf3n",children:"Instalaci\xf3n"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Clona el repositorio o descarga el archivo ",(0,a.jsx)(n.code,{children:"modbus_sensor.py"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git clone git@github.com:UNIT-Electronics-MX/unit_rs485_soil_temperature_humity_ec_ph_library_micropython.git\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["Copia el archivo ",(0,a.jsx)(n.code,{children:"modbus_sensor.py"})," a tu dispositivo con MicroPython."]}),"\n",(0,a.jsxs)(n.li,{children:["Importa la clase ",(0,a.jsx)(n.code,{children:"ModbusSensor"})," en tu script de MicroPython."]}),"\n",(0,a.jsx)(n.li,{children:"Inicializa el sensor con los pines UART y la velocidad de transmisi\xf3n adecuados."}),"\n",(0,a.jsxs)(n.li,{children:["Utiliza el m\xe9todo ",(0,a.jsx)(n.code,{children:"get_sensor_data()"})," para leer los valores del sensor."]}),"\n",(0,a.jsx)(n.li,{children:"Maneja los datos del sensor seg\xfan sea necesario."}),"\n",(0,a.jsx)(n.li,{children:"Aseg\xfarate de gestionar las excepciones y errores de manera apropiada."}),"\n"]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Nota:"})," Esta biblioteca est\xe1 dise\xf1ada para el ESP32 y puede requerir modificaciones para otras plataformas o hardware."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Se recomienda utilizar un m\xf3dulo RS485 de 5 V ",(0,a.jsx)(n.a,{href:"https://uelectronics.com/producto/convertidor-de-senal-ttl-a-rs485/",children:"RS485 module"})," para asegurar la compatibilidad con el ESP32."]}),"\n",(0,a.jsx)(n.h3,{id:"ejemplo",children:"Ejemplo"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from modbusSensor.modbus_sensor import ModbusSensor\nimport time\n\nsensor = ModbusSensor(tx_pin=26, rx_pin=25, baudrate=4800)\n\nwhile True:\n   humedad, temperatura, ce, ph = sensor.get_sensor_data()\n   print(f"Humedad: {humedad}% | Temperatura: {temperatura}\xb0C | CE: {ce} \xb5S/cm | pH: {ph}")\n   time.sleep(1)\n'})}),"\n",(0,a.jsx)(n.h1,{id:"transferencia-de-archivos-usando-ampy",children:"Transferencia de Archivos usando ampy"}),"\n",(0,a.jsx)(n.h2,{id:"uso-de-ampy-para-transferir-archivos-al-esp32",children:"Uso de ampy para transferir archivos al ESP32"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Instala ampy usando pip:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pip install adafruit-ampy\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Conecta tu ESP32 a la computadora v\xeda USB."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Utiliza ampy para transferir el archivo ",(0,a.jsx)(n.code,{children:"modbus_sensor.py"})," al ESP32:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ampy --port /dev/ttyUSB0 put modbus_sensor.py\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Sustituye ",(0,a.jsx)(n.code,{children:"/dev/ttyUSB0"})," por el puerto adecuado en tu sistema. Recuerda verificar el puerto utilizando el comando ",(0,a.jsx)(n.code,{children:"ls /dev/tty*"}),"."]}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Despu\xe9s de transferir el archivo, podr\xe1s acceder a \xe9l en tu entorno MicroPython."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Para ejecutar el script, puedes usar el REPL o crear un nuevo script que importe ",(0,a.jsx)(n.code,{children:"modbus_sensor"})," y lo utilice como se muestra en el ejemplo anterior."]}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var s=r(6540);const a={},i=s.createContext(a);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);